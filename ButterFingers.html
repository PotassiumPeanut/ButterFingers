<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Butterfingers</title>
</head>
<body>
    <div id=>
    <h1>Butterfingers: The Tale of a Young Squire</h1>   
        <p>This tale is about a squire named Scott.  Now, Scott was qualified for being a knight.  He were witty, courageous, and persevering; however, he had an affliction that still had him be a squire;  he had butterfingers.  For seven years, it seemed that Scott simply couldn’t overcome this curse that blocked his path to knighthood.  Lucky for him, he had a patient teacher, one who was the most valiant of the land, Sir Ivan.  When most of the knights turned Scott down because of his butterfingers, Sir Ivan was there, welcoming Scott as his squire.  When the other knights heard this, they were a bit confused, but they didn’t question Ivan’s decision.</p>
    <div id="myDIV">
    </div>
</body>
<script>
/*const story = {
    intro: { 
        text: `One day, as the two were training, the king called all of his knights and their squires over to the throne room for an important meeting.  “My loyal subjects,” he began, “my precious daughter has been seized by a fiendish dragon by the night.  I need five noble knights to journey to the beast’s den to slay it and recover my daughter from that abomination’s lair.”\n One by one, four knights and their squires come up to the the king to lend their hand.  Sir Ivan was going to approach the king, but looked back at Scott.  "Would you like to come with me on this journey?  I know you have problems wielding your arms, but I assure that you can be of help.  You can stay behind if you are not ready, and you can practice by yourself or with the other knights and squires."`,
        choices: [
            []
            []
            []
        ]
    }
}
    depart: `I don't know how to array \n text`,
    stayAtCastle0: ` `,
    indecisive0: ` `,
    stayAtCastle1: ` `,
    indecisive1: ` `,
    fleeComrades: ` `,
    stayComrades: ` `,
    passive: ` `,
    aggressive: ` `,
    dragonRight: ` `,
    dragonWrong: ` `,
    avenge: ` `,
    dontAvenge: ` `,
    cowardice: ` `,
    steakOut: ` `,
    findPrincess: ` `,
    deleteBeast0: ` `,
    deleteBeast1: ` `,
    takeFirst: ` `,
    vibeCheck: ` `,
    shortSword: ` `,
    foreheadButNo: ` `,
    spineButNo: ` `,
    byHand: ` `,
    bridalStyle: ` `,
    noWay: ` `,
    yeah: ` `,
    excellentPlan: ` `,
    youAreGoingToDie: ` `,
    sirRRSword: ` `,
    ballAndChain: ` `
}
*/
</script>

<div id="story">
</div>
<div id="buttons">
</div>
<script>
    const story = {
    intro: { 
        text: `One day, as the two were training, the king called all of his knights and their squires over to the throne room for an important meeting.  “My loyal subjects,” he began, “my precious daughter has been seized by a fiendish dragon by the night.  I need five noble knights to journey to the beast’s den to slay it and recover my daughter from that abomination’s lair.”\n One by one, four knights and their squires come up to the the king to lend their hand.  Sir Ivan was going to approach the king, but looked back at Scott.  "Would you like to come with me on this journey?  I know you have problems wielding your arms, but I assure that you can be of help.  You can stay behind if you are not ready, and you can practice by yourself or with the other knights and squires." \n \n Does Scott join Sir Ivan?`,
        choices: [
            ["Yes", "depart"],
            ["No", "stayAtCastle0"],
            ["No?", "indecisive0"]
        ]
    },
    depart: {
        text: `Scott leaves the castle and then meets the mean squires`,
        choices: [
            ["Run Away","fleeComrades"],
            ["Stay", "stayComrades"]
        ]
    },
    stayAtCastle0: {
        text: `Scott firmly stays at castle`,
        choices: [
            ["No way", "noWay"],
            ["I guess he has to", "yeah"]
        ]
    },
    indecisive0: {
        text: `Scott stays at castle but is indecisive`,
        choices: [
            ["Stay", "stayAtCastle1"],
            ["He should've gone","indecisive1"]
        ]

    },
    stayAtCastle1: {
        text: `from indecisive0, Scott stays`,
        choices: [
            ["No way", "noWay"],
            ["I guess he has to", "yeah"]
        ]

    },
    indecisive1: {
        text: `from indecisive0, Scott leaves`,
        choices: [
            ["Avenge your fallen soldiers", "avenge"],
            ["Evaluate your choices", ""]
        ]

    },
    fleeComrades: {
        text: `This path gets him mauled by a bear`,
        choices: []

    },
    stayComrades: {
        text: `You get there and see the dragon, How will you approach him?`,
        choices: [
            ["Be ready to fight", "aggressive"],
            ["Be prepared but careful and ready" ,"passive"]
        ]

    },
    passive: {
        text: `The dragon told you to return to the Kingdom and tell the King to bring him all the gold and then went back to his cave, Heed the dragon's advice and return empty handed?`,
        choices: [
            ["Yes ", "dragonRight"],
            ["No", "dragonWrong"]
        ]

    },
    aggressive: {
        text: `ded`,
        choices: []

    },
    dragonRight: {
        text: `You return to the Kingdom empty handed. You return to the castle after a week's journey. The king knows what happened as the others did not return with you. He forms another gathering and asks for volunteers from the crowd. Only one comes up, Sir RichardRicher, the obnoxious excuse for a knight. Will you go with Sir RichardRicher?`,
        choices: [
            ["No! I hate him with a burning passion!", "noWay"],
            ["Sure... Got nothing else to do..", "yeah"]
        ]

    },
    dragonWrong: {
        text: `You approach the castle, and expect the worst. You get inside the ruins you see a pile of armors yielding your kingdom's emblem. Will you attack the dragon to avenge fallen knights?`, 
        choices: [
            ["Yes!", "avenge"],
            ["No", "dontAvenge"]
        ]

    },
    avenge: {
        text: `You walk into the castle ready for what is to come, what is your plan?`,
        choices: [
            ["Look around for the princess to make sure she is safe", "findPrincess"],
            ["Kill the beast while you have your chance", "deleteBeast0"]
        ]

    },
    dontAvenge: {
        text: `What will you do instead of avenging them? `,
        choices: [
            ["Stay where you are and wait for backup", "steakOut"],
            ["Become your own knight", "cowardice"]
        ]

    },
    cowardice: {
        text: `You're tired of being a squire, you go to the forest to live alone with a solitude life`,
        choices: []

    },
    steakOut: {
        text: `After some weeks, you see Sir RichardRicher approach. He offers a plan to go in and attack it hitting it repetitively. Do you agree to go with this plan?`,
        choices: [
            ["That's an excellent plan", "excellentPlan"],
            ["That plan sucks", "youAreGoingToDie"]
        ]

    },
    findPrincess: {
        text: ` `,
        choices: [
            ["Get her out of there!", "takeFirst"],
            ["There's still a dragon to dispose of", "deleteBeast1"]
        ]

    },
    deleteBeast0: {
        text: ``,
        choices: [
            ["Find the nearest rock and bash the dragon's skull in", "vibeCheck"],
            ["Find the nearest sword.", "shortSword"]
        ]

    },
    deleteBeast1: {
        text: ` `,
        choices: [
            ["Find the nearest rock and bash the dragon's skull in", "vibeCheck"],
            ["Find the nearest sword.", "shortSword"]
        ]

    },
    takeFirst: {
        text: `ded`,
        choices: []

    },
    vibeCheck: {
        text: `ded`,
        choices: []

    },
    shortSword: {
        text: ` `,
        choices: [
            ["Into his forehead"],
            ["Right in the spine", "spineButNo"]
        ]

    },
    foreheadButNo: {
        text: ` `,
        choices: [
            ["By the hand", "byHand"],
            ["Bridal style baby", "bridalStyle"]
        ]

    },
    spineButNo: {
        text: `ded`,
        choices: []

    },
    byHand: {
        text: `Y'all got out the castle`,
        choices: []

    },
    bridalStyle: {
        text: `Y'all both died`,
        choices: []

    },
    noWay: {
        text: `ded but not really`,
        choices: []

    },
    yeah: {
        text: ` `,
        choices: [
            ["That's an excellent plan", "excellentPlan"],
            ["That plan sucks", "youAreGoingToDie"]
        ]

    },
    excellentPlan: {
        text: `ded`,
        choices: []

    },
    youAreGoingToDie: {
        text: ` `,
        choices: [
            ["Grab Sir RichardRicher's sword", "sirRRSword"],
            ["Use your trusty flail", "ballAndChain"]
        ]

    },
    sirRRSword: {
        text: `ded`,
        choices: []

    },
    ballAndChain: {
        text: ` `,
        choices: []

    },
}
let storyContainer = document.getElementById("story");

let buttonContainer = document.getElementById("buttons");

let history = ["intro"]

function makeButton(btnText, choice){
            let button = document.createElement("button");
            button.innerHTML = btnText;
            buttonContainer.appendChild(button);
            button.addEventListener ("click", function() {
                history.push(choice);
                showStory();
            });
        }
        function buildStory(text) {
            let storyItem = document.createElement("p");
            storyItem.innerText = text;
            storyContainer.appendChild(storyItem);
        }
        function showStory(){
            let currentPage = history[history.length - 1]; // set currentPage to last index of history array.
            storyContainer.innerHTML = ""; // reset html
            buttonContainer.innerHTML = ""; // reset buttons
            
            for(let page of history){ // build story text from items in history array
                buildStory(story[page].text);
            }
            
            for(let choice of story[currentPage].choices){ // build buttons from choices property of most recent story choice
                makeButton(choice[0], choice[1])
            }
        }
        showStory();
        
        
    </script>
      
</body>
</html>