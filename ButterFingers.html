<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Butterfingers</title>
</head>
<body>
    <div id=>
    <h1>Butterfingers: The Tale of a Young Squire</h1>   
        <p>This tale is about a squire named Scott.  Now, Scott was qualified for being a knight.  He were witty, courageous, and persevering; however, he had an affliction that still had him be a squire;  he had butterfingers.  For seven years, it seemed that Scott simply couldn’t overcome this curse that blocked his path to knighthood.  Lucky for him, he had a patient teacher, one who was the most valiant of the land, Sir Ivan.  When most of the knights turned Scott down because of his butterfingers, Sir Ivan was there, welcoming Scott as his squire.  When the other knights heard this, they were a bit confused, but they didn’t question Ivan’s decision.</p>
    <div id="myDIV">
    </div>
</body>
<script>
/*const story = {
    intro: { 
        text: `One day, as the two were training, the king called all of his knights and their squires over to the throne room for an important meeting.  “My loyal subjects,” he began, “my precious daughter has been seized by a fiendish dragon by the night.  I need five noble knights to journey to the beast’s den to slay it and recover my daughter from that abomination’s lair.”\n One by one, four knights and their squires come up to the the king to lend their hand.  Sir Ivan was going to approach the king, but looked back at Scott.  "Would you like to come with me on this journey?  I know you have problems wielding your arms, but I assure that you can be of help.  You can stay behind if you are not ready, and you can practice by yourself or with the other knights and squires."`,
        choices: [
            []
            []
            []
        ]
    }
}
    depart: `I don't know how to array \n text`,
    stayAtCastle0: ` `,
    indecisive0: ` `,
    stayAtCastle1: ` `,
    indecisive1: ` `,
    fleeComrades: ` `,
    stayComrades: ` `,
    passive: ` `,
    aggressive: ` `,
    dragonRight: ` `,
    dragonWrong: ` `,
    avenge: ` `,
    dontAvenge: ` `,
    cowardice: ` `,
    steakOut: ` `,
    findPrincess: ` `,
    deleteBeast0: ` `,
    deleteBeast1: ` `,
    takeFirst: ` `,
    vibeCheck: ` `,
    shortSword: ` `,
    foreheadButNo: ` `,
    spineButNo: ` `,
    byHand: ` `,
    bridalStyle: ` `,
    noWay: ` `,
    yeah: ` `,
    excellentPlan: ` `,
    youAreGoingToDie: ` `,
    sirRRSword: ` `,
    ballAndChain: ` `
}
*/
</script>

<div id="story">
</div>
<div id="buttons">
</div>
<script>
    const story = {
    intro: { 
        text: `One day, as the two were training, the king called all of his knights and their squires over to the throne room for an important meeting.  “My loyal subjects,” he began, “my precious daughter has been seized by a fiendish dragon by the night.  I need five noble knights to journey to the beast’s den to slay it and recover my daughter from that abomination’s lair.”\n One by one, four knights and their squires come up to the the king to lend their hand.  Sir Ivan was going to approach the king, but looked back at Scott.  "Would you like to come with me on this journey?  I know you have problems wielding your arms, but I assure that you can be of help.  You can stay behind if you are not ready, and you can practice by yourself or with the other knights and squires." \n \n Does Scott join Sir Ivan or does he stay behind?`,
        choices: [
            ["Yes", "depart"],
            ["No", "stayAtCastle0"],
            ["No?", "indecisive0"]
        ]
    },
    depart: {
        text: `Scott leaves the castle and then meets the mean squires`,
        choices: [
            [],
            []
        ]
    },
    stayAtCastle0: {
        text: `Scott firmly stays at castle`,
        choices: [
            [],
            []
        ]
    },
    indecisive0: {
        text: `Scott stays at castle but is indecisive`,
        choices: [
            [],
            []
        ]

    },
    stayAtCastle1: {
        text: `from indecisive0, Scott stays`,
        choices: [
            [],
            []
        ]

    },
    indecisive1: {
        text: `from indecisive0, Scott leaves`,
        choices: [
            [],
            []
        ]

    },
    fleeComrades: {
        text: `This path gets him mauled by a bear`,
        choices: []

    },
    stayComrades: {
        text: ` `,
        choices: [
            [],
            []
        ]

    },
    passive: {
        text: ` `,
        choices: [
            [],
            []
        ]

    },
    aggressive: {
        text: ` `,
        choices: []

    },
    dragonRight: {
        text: ` `,
        choices: [
            [],
            []
        ]

    },
    dragonWrong: {
        text: ` `,
        choices: [
            [],
            []
        ]

    },
    avenge: {
        text: ` `,
        choices: [
            [],
            []
        ]

    },
    dontAvenge: {
        text: ` `,
        choices: [
            [],
            []
        ]

    },
    cowardice: {
        text: ` `,
        choices: []

    },
    steakOut: {
        text: ` `,
        choices: [
            [],
            []
        ]

    },
    findPrincess: {
        text: ` `,
        choices: [
            [],
            []
        ]

    },
    deleteBeast0: {
        text: ` `,
        choices: [
            [],
            []
        ]

    },
    deleteBeast1: {
        text: ` `,
        choices: [
            [],
            []
        ]

    },
    takeFirst: {
        text: ` `,
        choices: []

    },
    vibeCheck: {
        text: ` `,
        choices: []

    },
    shortSword: {
        text: ` `,
        choices: [
            [],
            []
        ]

    },
    foreheadButNo: {
        text: ` `,
        choices: [
            [],
            []
        ]

    },
    spineButNo: {
        text: ` `,
        choices: []

    },
    byHand: {
        text: ` `,
        choices: []

    },
    bridalStyle: {
        text: ` `,
        choices: []

    },
    noWay: {
        text: ` `,
        choices: []

    },
    yeah: {
        text: ` `,
        choices: [
            [],
            []
        ]

    },
    excellentPlan: {
        text: ` `,
        choices: []

    },
    youAreGoingToDie: {
        text: ` `,
        choices: [
            [],
            []
        ]

    },
    sirRRSword: {
        text: ` `,
        choices: []

    },
    ballAndChain: {
        text: ` `,
        choices: []

    },
}
let storyContainer = document.getElementById("story");

let buttonContainer = document.getElementById("buttons");

let history = ["intro"]

for(let choice in story.intro.choices){
    makeButton(choice)
}

function bazingaButton(btnText, choice){
    let button = document.createElement("button");
    button.innerHTML = btnText;
    buttoncontainer.appendChild(button);
    button.addEventListener ("click", function() {
           history.push(choice);
           showStory();
        });
}

function bazingaStory(text) {
    let storyItem = document.createElement("p");
    storyItem.innerText = text;
    storyContainer.appendChild(storyItem);
}
function showStory(){
            let currentPage = history[history.length - 1]; // set currentPage to last index of history array.
            storyContainer.innerHTML = ""; // reset html
            buttonContainer.innerHTML = ""; // reset buttons
            
            for(let page of history){ // build story text from items in history array
                buildStory(story[page].text);
            }
            
            for(let choice of story[currentPage].choices){ // build buttons from choices property of most recent story choice
                makeButton(choice[0], choice[1])
            }
        }
        showStory();
</script>
</body>
</html>